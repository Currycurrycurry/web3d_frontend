(function(e){function t(t){for(var s,r,l=t[0],i=t[1],c=t[2],d=0,m=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,l=1;l<a.length;l++){var i=a[l];0!==o[i]&&(s=!1)}s&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},o={app:0},n=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=i;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"02a1":function(e,t,a){"use strict";var s=a("f0ed"),o=a.n(s);o.a},1281:function(e,t,a){},"14fc":function(e,t,a){"use strict";var s=a("c7e7"),o=a.n(s);o.a},"15f5":function(e,t,a){},"1c49":function(e,t,a){"use strict";var s=a("6d02"),o=a.n(s);o.a},"1f2a":function(e,t,a){"use strict";var s=a("a32b"),o=a.n(s);o.a},2115:function(e,t,a){"use strict";var s=a("f947"),o=a.n(s);o.a},"2b69":function(e,t,a){"use strict";var s=a("d073"),o=a.n(s);o.a},"2f9d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("c975"),a("d3b7"),a("ac1f"),a("5319"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),o=a("5c96"),n=a.n(o),r=(a("0fae"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),l=[],i={name:"App",components:{}},c=i,u=a("2877"),d=Object(u["a"])(c,r,l,!1,null,null,null),m=d.exports,p=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app container",attrs:{id:"jsi-cherry-container"}},[a("Top"),a("NavMenu"),a("router-view"),a("canvas"),a("Footer",{staticStyle:{"text-align":"center"}}),a("live2d")],1)},g=[],h=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal",router:""},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"/hall",route:"/hall"}},[e._v("游戏中心")]),a("el-menu-item",[a("el-submenu",[a("template",{slot:"title"},[e._v("个人中心")]),a("el-menu-item",{attrs:{index:"/information"}},[e._v("基本信息")]),a("el-menu-item",{attrs:{index:"/records"}},[e._v("历史战绩")]),a("el-menu-item",{attrs:{index:"/knowledgeList"}},[e._v("知识清单")])],2)],1),a("el-menu-item",{attrs:{index:"/models"}},[e._v("角色图鉴")]),a("el-menu-item",{attrs:{index:"/chatRoom"}},[e._v("聊天室")]),e.isadmin?a("el-menu-item",{attrs:{index:"/admin"}},[e._v("管理后台")]):e._e(),a("el-menu-item",[a("i",{staticClass:"el-icon-setting",on:{click:function(t){return e.logout()}}}),e._v(e._s(e.username))])],1)}),b=[],v=a("5530"),_=a("2f62"),w=a("a78e"),y=a.n(w),x=a("bc3a"),C=a.n(x),k="http://122.51.160.221:8080",I="http://122.51.160.221:8080";function E(e,t){return C.a.post(e,t)}function N(e,t){return C.a.get(e,t)}function P(e){return C.a.get(e)}function j(e){return E("/login",e)}function U(e){return E("/register",e)}function $(e){return E("/modifyInformation",e)}function R(e){return N("/getUserInfo",e)}function A(e){return N("/findUserById",{params:e})}function O(e){return N("/findKnowledgeByUserId",{params:e})}function S(e){return N("findRecordsByUserId",{params:e})}function D(){return P("/getUserProgresses")}function T(e){return N("/getIsAdmin",{params:e})}function L(e){return N("/getUserGameTimes",{params:e})}function G(e){return N("/getUserInfos",{params:e})}function M(e){return E("/changeModel",e)}function K(){return P("/getAllKnowledge")}function F(e){return E("/addKnowledge",e)}function V(e){return E("/deleteKnowledge",e)}function J(e){return E("/modifyKnowledge",e)}function B(e){return N("/initRoom",{params:e})}function z(){return P("/getRoomInfo")}function q(e){return E("/cleanCurrentGame",e)}C.a.defaults.timeout=1e4,C.a.defaults.baseURL=k,C.a.defaults.withCredentials=!0,C.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",C.a.defaults.headers.get["Content-Type"]="application/json";var H={gameURL:I,login:j,modify:$,getUserInfo:R,register:U,findUserById:A,getRecords:S,getKnowlegeList:O,getUserProgresses:D,getIsAdmin:T,getGameNums:L,getUserInfos:G,changeModel:M,getAllKnowledges:K,addKnowledge:F,deleteKnowledge:V,modifyKnowledge:J,createRoom:B,getRooms:z,cleanCurrentGame:q},W={state:{user_id:-1,token:y.a.get("token"),username:"",email:"",fullName:"",age:"",gender:"",model:0,region:"",isadmin:!1},mutations:{SET_USER_ID:function(e,t){e.user_id=t},SET_USERNAME:function(e,t){e.username=t},SET_MODEL:function(e,t){e.model=t},SET_EMAIL:function(e,t){e.email=t},SET_REGION:function(e,t){e.region=t},SET_GENDER:function(e,t){e.gender=t},SET_FULLNAME:function(e,t){e.fullName=t},SET_AGE:function(e,t){e.age=t},SET_IS_ADMIN:function(e,t){e.isadmin=t},LOGIN_SUCCESS:function(){console.log("login success")},LOGOUT_USER:function(e){e.user_id=-1,e.username="",e.token="",e.email="",e.gender="",e.region="",e.fullName="",e.model=0,e.age="",e.isadmin=!1},SET_TOKEN:function(e,t){e.token=t}},actions:{logout:function(e){var t=e.commit;t("LOGOUT_USER")},setUserInfo:function(e){var t=e.commit;return new Promise((function(e,a){H.getUserInfo().then((function(a){t("SET_USER_ID",a.data.content["id"]),t("SET_USERNAME",a.data.content["username"]),t("SET_MODEL",a.data.content["modelId"]),t("SET_EMAIL",a.data.content["email"]),t("SET_REGION",a.data.content["region"]),t("SET_GENDER",a.data.content["gender"]),t("SET_FULLNAME",a.data.content["fullname"]),t("SET_AGE",a.data.content["age"]),t("SET_TOKEN",y.a.get("token")),e(a)})).catch((function(e){console.log(e.response),a(e)}))}))},setIsAdmin:function(e,t){var a=e.commit;return new Promise((function(e,s){H.getIsAdmin({userId:t}).then((function(t){a("SET_IS_ADMIN",t.data.content),e(t)})).catch((function(e){console.log(e.response),s(e)}))}))},modify:function(e,t,a,s,o,n,r){var l=e.commit;l("SET_MODEL",t),l("SET_EMAIL",a),l("SET_REGION",s),l("SET_GENDER",o),l("SET_FULLNAME",n),l("SET_AGE",r)},modifyModel:function(e,t){var a=e.commit;a("SET_MODEL",t)},modifyEmail:function(e,t){var a=e.commit;a("SET_EMAIL",t)},modifyRegion:function(e,t){var a=e.commit;a("SET_REGION",t)},modifyGender:function(e,t){var a=e.commit;a("SET_GENDER",t)},modifyFullname:function(e,t){var a=e.commit;a("SET_FULLNAME",t)},modifyAge:function(e,t){var a=e.commit;a("SET_AGE",t)}}},Z=W,Q=a("d347"),X=a.n(Q),Y={user_id:function(e){return e.user.user_id},username:function(e){return e.user.username},model:function(e){return e.user.model},token:function(e){return e.user.token},email:function(e){return e.user.email},fullName:function(e){return e.user.fullName},age:function(e){return e.user.age},gender:function(e){return e.user.gender},region:function(e){return e.user.region},isadmin:function(e){return e.user.isadmin}},ee=Y;s["default"].use(_["a"]);var te=new _["a"].Store({modules:{user:Z,question:X.a},getters:ee}),ae=te,se={name:"NavMenu",data:function(){return{activeIndex:"/hall",name:ae.getters.username}},created:function(){this.getisadmin()},computed:Object(v["a"])({},Object(_["b"])(["isadmin","user_id","username"])),methods:{handleSelect:function(e,t){console.log(e,t)},getisadmin:function(){var e=this;console.log("enter isadmin...");var t=ae.getters.user_id;"-1"===t?ae.dispatch("setUserInfo").then((function(){ae.dispatch("setIsAdmin",e.user_id).then((function(){console.log("set admin and userinfo  ok")}))})):ae.dispatch("setIsAdmin",t).then((function(){console.log("set admin ok")}))},logout:function(){console.log(ae.getters.user_id),ae.dispatch("logout").then((function(){y.a.set("token",""),y.a.set("userID",""),y.a.set("roomID",""),y.a.set(""),console.log("cookie token is "+y.a.get("token")),wa.push("/pages/Login")}))}}},oe=se,ne=Object(u["a"])(oe,h,b,!1,null,"25dc4fc8",null),re=ne.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("img",{attrs:{alt:"Vue logo",height:"360px",src:a("9564"),width:"100%"}})},ie=[],ce={name:"Top"},ue=ce,de=Object(u["a"])(ue,le,ie,!1,null,"3ccd937a",null),me=de.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-footer",{staticClass:"footer"},[e._v(" Copyright © "),a("a",{attrs:{href:"https://github.com/"}},[e._v("はたらく細胞")]),e._v(" 2020 "),a("span",{staticClass:"float-right"},[a("a",{attrs:{href:"https://zh.moegirl.org/"}},[a("i",{staticClass:"el-icon-orange"}),e._v("工作细胞")])])])},fe=[],ge={name:"Footer"},he=ge,be=(a("a726"),Object(u["a"])(he,pe,fe,!1,null,"3d221bc2",null)),ve=be.exports,_e=a("d54c"),we=a.n(_e),ye=(a("ffa9"),{name:"Container",components:{Footer:ve,NavMenu:re,live2d:we.a,Top:me},data:function(){return{}},computed:{name:function(){return this.$route.name},list:function(){return this.$route.matched}},methods:{error:function(e){this.$message.error(e)},success:function(e){this.$message.success(e)}}}),xe=ye,Ce=(a("14fc"),Object(u["a"])(xe,f,g,!1,null,"d4751780",null)),ke=Ce.exports,Ie=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ee=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page404"},[a("div",{staticClass:"code"},[a("p",[e._v("ERROR 404")]),a("p",[e._v("访问资源未找到")])]),a("div",{staticClass:"road"},[a("div",{staticClass:"shadow"},[a("div",{staticClass:"shelt"},[a("div",{staticClass:"head"},[a("div",{staticClass:"eyes"},[a("div",{staticClass:"lefteye"},[a("div",{staticClass:"eyeball"}),a("div",{staticClass:"eyebrow"})]),a("div",{staticClass:"righteye"},[a("div",{staticClass:"eyeball"}),a("div",{staticClass:"eyebrow"})])])])]),a("div",{staticClass:"hat"}),a("div",{staticClass:"bubble"},[a("a",{attrs:{href:"/"}},[e._v("返回主页?")])])]),a("p",[e._v("PAGE NOT FOUND")])])])}],Ne=a("1157"),Pe=a.n(Ne),je={name:"Page404",mounted:function(){var e,t,a=17,s=150,o=0,n=0,r=1;function l(){}function i(){e=setInterval((function(){a-=.3,s-=2.5,o=(17-a)/17,a>0?(Pe()(".head").css("top",s+"px"),Pe()(".hat").css("transform","rotate("+a+"deg)"),Pe()(".bubble").css("opacity",o)):(window.clearInterval(e),t=setInterval((function(){n+=r,Pe()(".lefteye .eyebrow").css("clip","rect(0px 38px "+n+"px 0px)"),Pe()(".righteye .eyebrow").css("clip","rect(0px 38px "+n+"px 0px)"),n%19===0&&(r=-r)}),10))}),55),window.setTimeout((function(){window.clearInterval(t),e=setInterval((function(){a+=.3,s+=2.5,o=(17-a)/17,a<=17?(Pe()(".head").css("top",s+"px"),Pe()(".hat").css("transform","rotate("+a+"deg)"),Pe()(".bubble").css("opacity",o)):(window.clearInterval(e),i())}),55)}),6e3)}document.onmousemove=l,i()}},Ue=je,$e=(a("c839"),Object(u["a"])(Ue,Ie,Ee,!1,null,"35e706b7",null)),Re=$e.exports,Ae=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Oe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page404"},[a("div",{staticClass:"code"},[a("p",[e._v("ERROR 500")]),a("p",[e._v("内部服务器错误")])]),a("div",{staticClass:"road"},[a("div",{staticClass:"shadow"},[a("div",{staticClass:"shelt"},[a("div",{staticClass:"head"},[a("div",{staticClass:"eyes"},[a("div",{staticClass:"lefteye"},[a("div",{staticClass:"eyeball"}),a("div",{staticClass:"eyebrow"})]),a("div",{staticClass:"righteye"},[a("div",{staticClass:"eyeball"}),a("div",{staticClass:"eyebrow"})])])])]),a("div",{staticClass:"hat"}),a("div",{staticClass:"bubble"},[a("a",{attrs:{href:"/"}},[e._v("返回主页?")])])]),a("p",[e._v("Internal Server Error")])])])}],Se={name:"Page500",mounted:function(){var e,t,a=17,s=150,o=0,n=0,r=1;function l(){}function i(){e=setInterval((function(){a-=.3,s-=2.5,o=(17-a)/17,a>0?(Pe()(".head").css("top",s+"px"),Pe()(".hat").css("transform","rotate("+a+"deg)"),Pe()(".bubble").css("opacity",o)):(window.clearInterval(e),t=setInterval((function(){n+=r,Pe()(".lefteye .eyebrow").css("clip","rect(0px 38px "+n+"px 0px)"),Pe()(".righteye .eyebrow").css("clip","rect(0px 38px "+n+"px 0px)"),n%19===0&&(r=-r)}),10))}),55),window.setTimeout((function(){window.clearInterval(t),e=setInterval((function(){a+=.3,s+=2.5,o=(17-a)/17,a<=17?(Pe()(".head").css("top",s+"px"),Pe()(".hat").css("transform","rotate("+a+"deg)"),Pe()(".bubble").css("opacity",o)):(window.clearInterval(e),i())}),55)}),6e3)}document.onmousemove=l,i()}},De=Se,Te=(a("1f2a"),Object(u["a"])(De,Ae,Oe,!1,null,"645b0bfc",null)),Le=Te.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.recordsTable,stripe:""}},[a("el-table-column",{attrs:{prop:"gameId",label:"游戏编号",width:"180"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"180"}}),a("el-table-column",{attrs:{prop:"score",label:"分数"}}),a("el-table-column",{attrs:{prop:"players",label:"玩家列表"}}),a("el-table-column",{attrs:{prop:"time",label:"时间"}})],1),a("el-pagination",{attrs:{layout:"prev, pager, next","hide-on-single-page":!0,total:5}})],1)},Me=[],Ke=(a("a15b"),{name:"Records",data:function(){return{recordsTable:[]}},computed:Object(v["a"])({},Object(_["b"])(["user_id"])),mounted:function(){this.getRecords()},methods:{getRecords:function(){var e=this;console.log(ae.getters.user_id),"-1"===ae.getters.user_id?ae.dispatch("setUserInfo").then((function(){H.getRecords({userId:ae.getters.user_id}).then((function(t){console.log(t.data.content);for(var a=t.data.content,s=0;s<a.length;s++){for(var o=a[s]["users"],n=[],r=0;r<o.length;r++)n.push(o[r]["username"]);e.recordsTable.push({gameId:s,status:a[s]["status"],score:a[s]["score"],players:n.join(),time:a[s]["time"]})}})).catch((function(e){console.log(e.response)}))})):H.getRecords({userId:ae.getters.user_id}).then((function(t){console.log(t.data.content);for(var a=t.data.content,s=0;s<a.length;s++){for(var o=a[s]["users"],n=[],r=0;r<o.length;r++)n.push(o[r]["username"]);e.recordsTable.push({gameId:s,status:a[s]["status"],score:a[s]["score"],players:n.join(),time:a[s]["time"]})}})).catch((function(e){console.log(e.response)}))}}}),Fe=Ke,Ve=Object(u["a"])(Fe,Ge,Me,!1,null,"7331d192",null),Je=Ve.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Top"),a("div",{staticClass:"login",attrs:{clearfix:""}},[a("div",{staticClass:"login-wrap"},[a("el-row",{attrs:{justify:"center",type:"flex"}},[a("el-form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px","status-icon":""}},[a("h3",[e._v("登录")]),a("hr"),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名","prefix-icon":""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{id:"password",label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("router-link",{attrs:{to:"/pages/Register"}},[e._v("没有账号？注册")]),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-upload",type:"primary"},on:{click:function(t){return e.doLogin()}}},[e._v("登 录")])],1)],1)],1)],1)])],1)},ze=[],qe={name:"login",components:{Top:me},data:function(){var e=function(e,t,a){if(!t)return a(new Error("用户名不能为空！"));setTimeout((function(){t.length<5?a(new Error("用户名长度大于5！")):a()}),1e3)},t=function(e,t,a){if(!t)return a(new Error("密码不能为空！"));a()};return{form:{username:"",password:""},rules:{username:[{validator:e,trigger:"blur"}],password:[{validator:t,trigger:"blur"}]}}},created:function(){},methods:{doLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t?H.login(e.form).then((function(t){if(console.log("logging in..."),200===t.status)if(200===t.data.code){console.log("success");var a=t.data.message,s=t.data.content;document.cookie="token="+a,y.a.set("userID",s["id"]),console.log("token is "+a),e.$message({message:"登陆成功",type:"success"}),ae.dispatch("setUserInfo"),wa.push({path:"/hall"})}else 404===t.data.code?"user does not exist"===t.data.message&&e.$message.error("用户名不存在!"):403===t.data.code&&"password is incorrect"===t.data.message&&e.$message.error("密码不正确!")})).catch((function(t){console.log("this is error: "+t.response),console.log("problems..."),e.$message.error("内部错误")})):(console.log("error submit"),e.$message.error("提交失败"))}))}}},He=qe,We=(a("ece8"),Object(u["a"])(He,Be,ze,!1,null,"5cb07fe5",null)),Ze=We.exports,Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Top"),a("div",{staticClass:"login clearfix"},[a("div",{staticClass:"login-wrap"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-form",{ref:"registerForm",attrs:{model:e.user,rules:e.rules,"status-icon":"","label-width":"80px"}},[a("h3",[e._v("注册")]),a("router-link",{attrs:{to:"/pages/Login"}},[e._v("已有账号？登陆")]),a("hr"),a("el-form-item",{attrs:{prop:"username",label:"用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("el-form-item",{attrs:{prop:"password",label:"设置密码"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"model"}},[a("el-select",{attrs:{placeholder:"角色"},model:{value:e.user.modelId,callback:function(t){e.$set(e.user,"modelId",t)},expression:"user.modelId"}},[a("el-option",{attrs:{label:"B细胞",value:"0"}}),a("el-option",{attrs:{label:"血小板",value:"1"}}),a("el-option",{attrs:{label:"T细胞",value:"2"}}),a("el-option",{attrs:{label:"神经元细胞",value:"3"}}),a("el-option",{attrs:{label:"红血球",value:"4"}}),a("el-option",{attrs:{label:"抗体",value:"5"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:""},on:{click:function(t){return e.doRegister()}}},[e._v("注册账号")])],1)],1)],1)],1)])],1)},Xe=[],Ye={name:"Register",components:{Top:me},data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("用户名不能为空！"));setTimeout((function(){t.length<5?a(new Error("用户名长度大于5！")):a()}),500)},a=function(e,t,a){if(!t)return a(new Error("密码不能为空！"));t.length<=5?a(new Error("密码长度大于5！")):a()},s=function(t,a,s){if(!a)return s(new Error("邮箱不能为空！"));var o=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(!o.test(e.user.email))return s(new Error("请输入有效的邮箱！"));s()};return{user:{username:"",email:"",password:"",modelId:""},rules:{username:[{validator:t,trigger:"blur"}],password:[{validator:a,trigger:"blur"}],email:[{validator:s,trigger:"blur"}]}}},created:function(){},methods:{doRegister:function(){var e=this;console.log("user is "+this.user),this.$refs.registerForm.validate((function(t){if(console.log("user is "+e.user),console.log("user is "+JSON.stringify(e.user)),!t)return console.log("error register"),e.$message.error("非法参数"),!1;H.register(e.user).then((function(t){if(console.log("register"),console.log(t),200===t.status){var a=t.data.code,s=t.data.message;if(200===a){console.log("success"),e.$message.success("注册成功");var o=t.data.message,n=t.data.content;document.cookie="token="+o,console.log("token is "+o),y.a.set("userID",n["id"]),ae.dispatch("setUserInfo"),wa.push({path:"/hall"})}else 400===a&&("user has exist"===s?e.$message.error("用户名已存在"):"username should be filled"===s?e.$message.error("用户名为必填项"):"password should be filled"===s?e.$message.error("密码为必填项"):"invalid email"===s?e.$message.error("邮箱参数非法"):e.$message.error("参数异常"))}})).catch((function(t){console.log("this is error: "+t.response),"user has exist"===t.message?e.$message.error("用户名已存在"):"username should be filled"===t.message?e.$message.error("用户名为必填项"):"password should be filled"===t.message&&e.$message.error("密码为必填项"),console.log(t.message),e.$message.error("注册失败")}))}))}}},et=Ye,tt=(a("2115"),Object(u["a"])(et,Qe,Xe,!1,null,"1b1be2f7",null)),at=tt.exports,st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"information_table",data:e.information_data,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("p",{staticClass:"grid-content hint",staticStyle:{"margin-bottom":"5px","padding-bottom":"0px"}},[e._v("个人信息")]),a("hr")])],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("用户名")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content editable"},[e._v(e._s(e.username))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("地区")])]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"grid-content editable"},[e._v(e._s(e.region))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"grid-content editable"},[a("el-select",{staticClass:"input_len",attrs:{placeholder:"请选择所处区域"},model:{value:e.information_data.Region,callback:function(t){e.$set(e.information_data,"Region",t)},expression:"information_data.Region"}},[a("el-option",{attrs:{label:"上海",value:"shanghai"}}),a("el-option",{attrs:{label:"北京",value:"beijing"}})],1)],1)])],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("密码")])]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"grid-content editable"},[e._v(e._s(e.information_data.password))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"grid-content editable"},[a("div",[a("el-input",{staticClass:"input_len",attrs:{"show-password":"",placeholder:"原密码"},model:{value:e.information_data.originalPassword,callback:function(t){e.$set(e.information_data,"originalPassword",t)},expression:"information_data.originalPassword"}}),a("el-input",{staticClass:"input_len",attrs:{"show-password":"",placeholder:"新密码"},model:{value:e.information_data.newPassword,callback:function(t){e.$set(e.information_data,"newPassword",t)},expression:"information_data.newPassword"}})],1)])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("性别")])]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"grid-content editable"},[e._v(e._s(e.gender))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"grid-content editable"},[a("el-select",{staticClass:"input_len",attrs:{placeholder:"请选择性别"},model:{value:e.information_data.Gender,callback:function(t){e.$set(e.information_data,"Gender",t)},expression:"information_data.Gender"}},[a("el-option",{attrs:{label:"男",value:"male"}}),a("el-option",{attrs:{label:"女",value:"female"}})],1)],1)])],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("全名")])]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"grid-content editable"},[e._v(e._s(e.fullName))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"grid-content editable"},[a("el-input",{staticClass:"input_len",attrs:{placeholder:"请输入全名"},model:{value:e.information_data.FullName,callback:function(t){e.$set(e.information_data,"FullName",t)},expression:"information_data.FullName"}})],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("邮箱")])]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"grid-content editable"},[e._v(e._s(e.email))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"grid-content editable"},[a("el-input",{staticClass:"input_len",attrs:{placeholder:"请输入邮箱"},model:{value:e.information_data.Email,callback:function(t){e.$set(e.information_data,"Email",t)},expression:"information_data.Email"}})],1)])],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("年龄")])]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"grid-content editable"},[e._v(e._s(e.age))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"grid-content editable"},[a("el-input",{staticClass:"input_len",attrs:{autocomplete:"off",type:"age"},model:{value:e.information_data.Age,callback:function(t){e.$set(e.information_data,"Age",e._n(t))},expression:"information_data.Age"}})],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content hint"},[e._v("形象选择")])]),a("el-col",{attrs:{span:8}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"grid-content editable"},[e._v(e._s(e.model_name[parseInt(e.model)]))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],staticClass:"grid-content editable"},[a("el-select",{staticClass:"input_len",attrs:{placeholder:"请选择细胞"},model:{value:e.information_data.Model,callback:function(t){e.$set(e.information_data,"Model",t)},expression:"information_data.Model"}},[a("el-option",{attrs:{label:"B细胞",value:"0"}}),a("el-option",{attrs:{label:"血小板",value:"1"}}),a("el-option",{attrs:{label:"T细胞",value:"2"}}),a("el-option",{attrs:{label:"神经细胞",value:"3"}}),a("el-option",{attrs:{label:"红血球",value:"4"}}),a("el-option",{attrs:{label:"抗体",value:"5"}}),a("el-option",{attrs:{label:"病毒",value:"6"}}),a("el-option",{attrs:{label:"肿瘤细胞",value:"7"}})],1)],1)])],1),a("el-row",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],attrs:{type:"primary",icon:""},on:{click:function(t){return e.modify()}}},[e._v("保存修改")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],attrs:{type:"primary",icon:""},on:{click:function(t){return e.startEdit()}}},[e._v("编辑信息")])],1)],1)},ot=[],nt=(a("3ca3"),a("ddb0"),a("2b3d"),{name:"Information",data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("用户名不能为空！"));setTimeout((function(){t.length<5?a(new Error("用户名长度大于5！")):a()}),500)},a=function(e,t,a){if(!t)return a(new Error("密码不能为空！"));t.length<=5?a(new Error("密码长度大于5！")):a()},s=function(t,a,s){if(!a)return s(new Error("邮箱不能为空！"));var o=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(!o.test(e.user.email))return s(new Error("请输入有效的邮箱！"));s()};return{upload:"/",imageUrl:"",information_data:{Region:"上海",password:"*****",Gender:"女",FullName:"",Email:"",Age:"",originalPassword:"",newPassword:"",Model:""},model_name:["B细胞","血小板","T细胞","神经细胞","红血球","抗体","病毒","肿瘤细胞"],edit:!0,rules:{age:[{required:!0,message:"年龄不能为空"},{type:"number",message:"年龄必须为数字值"}],newPassword:[{validator:a,trigger:"blur"}],email:[{validator:s,trigger:"blur"}],fullName:[{validator:t,trigger:"blur"}]}}},computed:Object(v["a"])({},Object(_["b"])(["username","email","region","gender","fullName","age","model"])),methods:{upLoad:function(e){var t=new FormData;t.append("file",e.file),console.log(e)},handleAvatarSuccess:function(e,t){console.log("enter"),this.imageUrl=URL.createObjectURL(t.raw),console.log(this.imageUrl)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},modify:function(){var e=this;console.log("modify the user info...");var t=this.information_data.Model?this.information_data.Model:-1;H.modify({username:this.username,originalPassword:this.information_data.originalPassword,newPassword:this.information_data.newPassword,fullName:this.information_data.FullName,age:this.information_data.Age,region:this.information_data.Region,gender:this.information_data.Gender,email:this.information_data.Email,modelId:t}).then((function(t){if(console.log("modifying..."),200===t.status)if(200===t.data.code){var a=t.data.content;console.log("modify info ok"),e.$message.success("modify successfully"),ae.dispatch("modifyModel",a["modelId"]),ae.dispatch("modifyAge",a["age"]),ae.dispatch("modifyEmail",a["email"]),ae.dispatch("modifyFullname",a["fullname"]),ae.dispatch("modifyGender",a["gender"]),ae.dispatch("modifyRegion",a["region"]),console.log(a["modelId"]),console.log("after modifying..."+ae.getters),console.log(ae.getters.model),console.log(ae.getters)}else 403===t.data.code?"password is incorrect"===t.data.message&&e.$message.error("密码输入错误!"):404===t.data.code?e.$message.error("用户不存在！"):e.$message.error("修改失败！")})).catch((function(t){e.$message.error("error"),""===t.response.data.code&&e.$message.error("")})),this.edit=!1},startEdit:function(){console.log("edit.."),this.edit=!0,console.log(this.model_name),console.log(this.model_name[parseInt(ae.getters.model)]),console.log(ae.getters)}}}),rt=nt,lt=(a("d3dc"),Object(u["a"])(rt,st,ot,!1,null,"38d9510c",null)),it=lt.exports,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("el-row",[a("span",[e._v("当前玩家形象："+e._s(e.name[e.model]))]),e._v(" "),a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[e.model],mtl:e.publicPath2[e.model]}})],1),a("span",[e._v("查看所有角色图鉴")]),a("el-row",[a("el-col",{key:"0",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[0],mtl:e.publicPath2[0]}}),a("div",[a("span",[e._v(e._s(e.name[0]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[0]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){return e.chooseCell(0)}}},[e._v("选择细胞")])],1)])],1)],1),a("el-col",{key:"1",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[1],mtl:e.publicPath2[1]}}),a("div",[a("span",[e._v(e._s(e.name[1]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[1]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){return e.chooseCell(1)}}},[e._v("选择细胞")])],1)])],1)],1)],1),a("el-row",[a("el-col",{key:"0",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[2],mtl:e.publicPath2[2]}}),a("div",[a("span",[e._v(e._s(e.name[2]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[2]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){return e.chooseCell(2)}}},[e._v("选择细胞")])],1)])],1)],1),a("el-col",{key:"1",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[3],mtl:e.publicPath2[3]}}),a("div",[a("span",[e._v(e._s(e.name[3]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[3]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){return e.chooseCell(3)}}},[e._v("选择细胞")])],1)])],1)],1)],1),a("el-row",[a("el-col",{key:"0",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[4],mtl:e.publicPath2[4]}}),a("div",[a("span",[e._v(e._s(e.name[4]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[4]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){return e.chooseCell(4)}}},[e._v("选择细胞")])],1)])],1)],1),a("el-col",{key:"1",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[5],mtl:e.publicPath2[5]}}),a("div",[a("span",[e._v(e._s(e.name[5]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[5]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(t){return e.chooseCell(5)}}},[e._v("选择细胞")])],1)])],1)],1)],1),a("el-row",[a("el-col",{key:"0",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[6],mtl:e.publicPath2[6]}}),a("div",[a("span",[e._v(e._s(e.name[6]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[6]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text",disabled:""},on:{click:function(t){return e.chooseCell(6)}}},[e._v("选择细胞")])],1)])],1)],1),a("el-col",{key:"1",attrs:{span:10,offset:2}},[a("el-card",[a("model-obj",{staticClass:"model",attrs:{backgroundAlpha:0,src:e.publicPath[7],mtl:e.publicPath2[7]}}),a("div",[a("span",[e._v(e._s(e.name[7]))]),a("div",{staticClass:"bottom clearfix"},[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.gridData[7]}},[a("el-table-column",{attrs:{width:"80",property:"name",label:"名称"}}),a("el-table-column",{attrs:{width:"50",property:"status",label:"状态"}}),a("el-table-column",{attrs:{width:"450",property:"descr",label:"描述"}})],1),a("el-button",{staticClass:"detail",attrs:{slot:"reference"},slot:"reference"},[e._v("细胞详细信息")])],1),a("el-button",{staticClass:"button",attrs:{type:"text",disabled:""},on:{click:function(t){return e.chooseCell(7)}}},[e._v("选择细胞")])],1)])],1)],1)],1)],1)},ut=[],dt=a("e360"),mt={name:"Models",components:{ModelObj:dt["ModelObj"]},created:function(){this.name=["B细胞","血小板","T细胞","神经细胞","红血球","抗体","病毒","肿瘤细胞"],this.publicPath=["/models/cells/PJ模型/B细胞/B细胞.obj","/models/cells/PJ模型/血小板/血小板.obj","/models/cells/PJ模型/T细胞/T细胞.obj","/models/cells/PJ模型/神经元/神经元.obj","/models/cells/PJ模型/红血球/红血球.obj","/models/cells/PJ模型/抗体/huoxingxibao1.obj","/models/cells/PJ模型/病毒/病毒.obj","/models/cells/PJ模型/肿瘤细胞/肿瘤细胞.obj"],this.publicPath2=["/models/cells/PJ模型//B细胞/B细胞.mtl","/models/cells/PJ模型/血小板/血小板.mtl","/models/cells/PJ模型/T细胞/T细胞.mtl","/models/cells/PJ模型/神经元/神经元.mtl","/models/cells/PJ模型/红血球/红血球.mtl","/models/cells/PJ模型/抗体/huoxingxibao1.mtl","/models/cells/PJ模型/病毒/病毒.mtl","/models/cells/PJ模型/肿瘤细胞/肿瘤细胞.mtl"],this.info=["骨髓依赖性淋巴细胞简称B细胞，是由骨髓中的淋巴干细胞分化而来。与T淋巴细胞相比，它的体积略大。这种淋巴细胞受抗原刺激后，会增殖分化出大量浆细胞。浆细胞可合成和分泌抗体并在血液中循环。","血小板只存在于哺乳动物血液中，是哺乳动物血液中的有形成分之一。血小板的主要功能是凝血和止血，修补破损的血管。","T细胞是淋巴细胞的主要组分，它具有多种生物学功能，如直接杀伤靶细胞，辅助或抑制B细胞产生抗体，对特异性抗原和促有丝分裂原的应答反应以及产生细胞因子等，是身体中抵御疾病感染、肿瘤形成的英勇斗士。","神经细胞是一种高度特化的细胞，是神经系统的基本结构和功能单位之一，它具有感受刺激和传导兴奋的功能","红血球又称为红血球或血红细胞，是血液中数量最多的一种血球，同时也是脊椎动物体内通过血液将氧气从肺或鰓运送到身体各个組织的最主要的媒介。","抗体是一类能与抗原特异性结合的免疫球蛋白。","病毒是由一个核酸分子（DNA或RNA）与蛋白质构成的非细胞形态，为类生物，无法自行表现出生命现象，靠寄生生活的介于生命体及非生命体之间的有机物种","肿瘤细胞实质就是肿瘤。肿瘤组织由实质和间质两部分构成，肿瘤实质是肿瘤细胞，是肿瘤的主要成分，具有组织来源特异性。它决定肿瘤的生物学特点以及每种肿瘤的特殊性。"],this.gridData=[[{name:this.name[0],status:"启用",descr:this.info[0]}],[{name:this.name[1],status:"启用",descr:this.info[1]}],[{name:this.name[2],status:"启用",descr:this.info[2]}],[{name:this.name[3],status:"启用",descr:this.info[3]}],[{name:this.name[4],status:"启用",descr:this.info[4]}],[{name:this.name[5],status:"启用",descr:this.info[5]}],[{name:this.name[6],status:"禁用",descr:this.info[6]}],[{name:this.name[7],status:"禁用",descr:this.info[7]}]]},computed:Object(v["a"])({},Object(_["b"])(["model"])),data:function(){return{cellDict:[{name:"",pathObj:"/models/cells/0.obj",pathMtl:"/models/cells/0.mtl",descr:"",status:""},{name:"",pathObj:"/models/cells/1.obj",pathMtl:"/models/cells/1.mtl",descr:"",status:""},{name:"",pathObj:"/models/cells/2.obj",pathMtl:"/models/cells/2.mtl",descr:"",status:""},{name:"",pathObj:"/models/cells/3.obj",pathMtl:"/models/cells/3.mtl",descr:"",status:""}],publicPath:[],publicPath2:[],name:[],info:[],gridData:[]}},methods:{chooseCell:function(e){var t=this,a=ae.getters.user_id;H.changeModel({modelId:e,userId:a}).then((function(a){200===a.status&&200===a.data.code&&(console.log("success"),t.$message({message:"更换成功",type:"success"}),ae.dispatch("modifyModel",e))})).catch((function(e){console.log(e.response)}))}}},pt=mt,ft=(a("7cc9"),Object(u["a"])(pt,ct,ut,!1,null,"febe2b20",null)),gt=ft.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"知识点类别"}},[a("span",[e._v(e._s(t.row.type))])]),a("el-form-item",{attrs:{label:"知识点 ID"}},[a("span",[e._v(e._s(t.row.id))])]),a("el-form-item",{attrs:{label:"详情"}},[a("span",[e._v(e._s(t.row.desc))])])],1)]}}])}),a("el-table-column",{attrs:{label:"知识点 ID",prop:"id"}}),a("el-table-column",{attrs:{label:"知识点类别",prop:"type"}}),a("el-table-column",{attrs:{label:"详情",prop:"desc"}})],1)},bt=[],vt={name:"KnowledgeList",data:function(){return{knowledgeList:[],tableData:[]}},mounted:function(){var e=ae.getters.user_id;this.getKnowledgeList(e)},methods:{getKnowledgeList:function(e){var t=this;H.getKnowlegeList({userId:e}).then((function(e){for(var a=e.data.content,s=e.data.content.length,o=0;o<s;o++)console.log(a[o]),console.log(a[o]),t.tableData.push({id:o,type:"高中生物",desc:a[o]["content"]})})).catch((function(e){console.log(e.response)}))}}},_t=vt,wt=(a("93d5"),Object(u["a"])(_t,ht,bt,!1,null,"586e70ae",null)),yt=wt.exports,xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"align-items":"center"}},[s("div",[s("el-carousel",{staticStyle:{width:"650px",height:"300px",display:"block",margin:"30px auto"}},e._l(3,(function(t){return s("el-carousel-item",{key:t},[0===t?s("img",{attrs:{src:a("fc16"),width:"100%",height:"100%"}}):e._e(),1===t?s("img",{attrs:{src:a("b56d"),width:"100%",height:"100%"}}):e._e(),2===t?s("img",{attrs:{src:a("fc16"),width:"100%",height:"100%"}}):e._e(),3===t?s("img",{attrs:{src:a("b56d"),width:"100%",height:"100%"}}):e._e()])})),1)],1),s("div",{staticClass:"center"},[s("el-button",{staticClass:"center",attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e.startGame}},[e._v("开始游戏")]),s("el-button",{staticClass:"center",attrs:{type:"primary",icon:"el-icon-user"},on:{click:function(t){e.show=!e.show}}},[e._v("游戏说明")])],1),s("div",{staticClass:"div_center"},[s("el-collapse-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[s("div",{staticClass:"transition-box center"},[s("span",{staticClass:"header"},[e._v("工作细胞")]),s("el-divider",{attrs:{direction:"vertical"}}),s("span",{staticClass:"header"},[e._v("はたらく細胞")]),s("el-divider",[s("i",{staticClass:"el-icon-mobile-phone"})]),s("span",[e._v("您和伙伴将在游戏中化身为细胞，与人体内的各种其他细胞和入侵的病毒相遇。")]),s("br"),s("span",[e._v("收集线索、完成挑战，依靠知识和团队协作拯救病入膏肓的人类吧。")]),s("el-divider",[s("span",{staticClass:"smallheader"},[e._v("游戏操作")])]),s("span",[e._v("WASD移动，鼠标控制视角旋转/瞄准，左键点击与对象交互。")]),s("br"),s("span",[e._v("按B打开背包查看收集到的信息。")]),s("br"),s("span",[e._v("点击形形色色的NPC，你会获得： ")]),e._v(" "),s("br"),s("span",[e._v("宝贵的细胞/病毒信息 ")]),s("br"),s("span",[e._v("解开人体秘密的线索 ")]),s("br"),s("span",[e._v("抑或是会受到对方的挑战，正确回答题目会获得奖励。")]),s("br"),s("el-divider",[s("span",{staticClass:"smallheader"},[e._v("温馨提示")])]),s("span",[e._v("如果不慎撞到了病毒，你脆弱的细胞膜会受到侵蚀。")]),s("br"),s("span",[e._v("多次受伤细胞膜将破裂，你会融入血雾中。")]),s("br"),s("span",[e._v("你的存活与队伍息息相关，你受到的伤害将转化为团队生命值的损失。")]),s("br"),s("el-divider",[s("span",{staticClass:"smallheader"},[e._v("小Tips")])]),s("span",[e._v("通关条件：收集足够多的信息，队伍的进度将显示在游戏界面上方")]),s("br"),s("span",[e._v("游戏失败：当队伍体力值降为0，任务宣告失败。")])],1)])])],1)])},Ct=[],kt={name:"Hall",components:{},data:function(){return{show:!1}},methods:{startGame:function(){wa.push("Room")}}},It=kt,Et=(a("1c49"),Object(u["a"])(It,xt,Ct,!1,null,"ba26be46",null)),Nt=Et.exports,Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"scroll",staticClass:"wrap"},[a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.leaveRoom()}}},[e._v("离开房间")])],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("离开房间将退出游戏，是否确定离开房间？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.quitGame}},[e._v("确 定")])],1)]),a("iframe",{staticStyle:{margin:"30px auto"},attrs:{src:"game/main/src/main.html",frameborder:"0",scrolling:"auto",height:"500px",width:"1200px"}}),a("div",{staticClass:"chatting"},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:20}},[a("div",[a("el-input",{attrs:{type:"text",placeholder:"请输入内容",maxlength:"20","show-word-limit":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)]),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("发 送")])],1)],1)],1)],1)},jt=[],Ut=(a("498a"),a("cc7d")),$t=a.n(Ut),Rt=a("74d1"),At=a.n(Rt),Ot={name:"Chatting",data:function(){return{onlineUserList:{},inputValue:"",messageList:[],chat_socket:null,roomID:y.a.get("roomID"),msgUrl:"/topic/"+y.a.get("roomID")+"/toAll",startUrl:"/topic/"+y.a.get("roomID")+"/startChat",overUrl:"/topic/"+y.a.get("roomID")+"/gameOver",quitUrl:"/topic/"+y.a.get("roomID")+"/userQuit",dialogVisible:!1}},created:function(){var e=this;this.msgUrl="/topic/"+y.a.get("roomID")+"/toAll",this.startUrl="/topic/"+y.a.get("roomID")+"/startChat",this.overUrl="/topic/"+y.a.get("roomID")+"/gameOver",this.quitUrl="/topic/"+y.a.get("roomID")+"/userQuit",console.log(this.msgUrl),console.log(this.startUrl),console.log(this.overUrl),console.log(this.quitUrl),this.messageList=[],console.log("start mounting...");var t=new $t.a("http://122.51.160.221:8080/ws");function a(e){return new Promise((function(t){return setTimeout(t,e)}))}this.chat_socket=At.a.over(t),console.log("finish"),a(1e4).then((function(){e.join()}));var s=this;this.chat_socket.connect({},(function(){console.log("connect to the ws.."),this.subscribe("/topic/"+y.a.get("roomID")+"/startChat",(function(){})),this.subscribe("/topic/"+y.a.get("roomID")+"/toAll",(function(e){console.log("enter into toALL sub"),console.log("obj body is "+e.body);var t=JSON.parse(e.body),a=t.fromId;console.log("user id is "+a);var o=t.content;console.log("obj msg is "+o);var n=t.fromName;console.log("user undefined..."),s.joined(a).then((function(){s.$message({message:n+"说："+o,duration:2e3,offset:100})}))})),this.subscribe("/topic/"+y.a.get("roomID")+"/gameOver",(function(e){console.log("enter the game over method"),console.log("obj body is "+e.body),s.$message.success("本房间结束游戏！")})),this.subscribe("/topic/"+y.a.get("roomID")+"/userQuit",(function(e){console.log("enter the user quit method"),console.log("obj body is "+e.body);var t=e.content.id;s.messageList.push({type:2,msg:"用户 "+s.onlineUserList[t]._username+" 退出聊天",msgUser:null}),delete s.onlineUserList[t],s.$message.success("本房间结束游戏！")}))}))},updated:function(){this.scroll()},computed:Object(v["a"])({},Object(_["b"])(["user_id","username"])),ready:function(){window.onbeforeunload=function(e){return alert("退出游戏"),self.handleWindowClose(),e=e||window.event,e&&(e.returnValue="关闭提示"),"关闭提示"}},methods:{join:function(){},send:function(){this.message=this.trim(this.inputValue);var e={toId:-1,fromId:this.user_id,content:this.message,roomId:parseInt(this.roomID)};this.message.length>0&&(this.chat_socket.send("/app/chatMessageToAll",{},JSON.stringify(e)),this.inputValue="")},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},scroll:function(){this.$refs.scroll.scrollTop=this.$refs.scrollHeight},pushUsers:function(e){var t=this,a="";H.findUserById({userId:e}).then((function(s){a=s.data["username"],t.onlineUserList[e]={_username:a}})).catch((function(e){return console.log(e)}))},popUsers:function(e){delete this.onlineUserList[e]},joined:function(e){var t=this;return new Promise((function(a,s){var o="";H.findUserById({userId:e}).then((function(s){o=s.data["username"],t.onlineUserList[e]={_username:o},a(s)})).catch((function(e){console.log(e.response),s(e)}))}))},putMessage:function(e,t,a){console.log("msg putting..."),console.log("username is "+e),console.log("type is "+a),console.log("msg is "+t),this.messageList.push({type:a,msg:t,msgUser:{username:e}})},leaveRoom:function(){this.dialogVisible=!0},quitGame:function(){var e={objectId:this.user_id};this.chat_socket.send("/app/quitGame",{},JSON.stringify(e)),this.$router.push({path:"/room"})},handleWindowClose:function(){this.quitGame()}}},St=Ot,Dt=(a("65cb"),Object(u["a"])(St,Pt,jt,!1,null,"1880e04d",null)),Tt=Dt.exports,Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{index:"/userProgress",label:"玩家进度统计",name:"userProgress"}},[e._v("所有玩家进度盲排")]),a("el-tab-pane",{attrs:{index:"/gameNum",label:"游戏次数统计",name:"gameNum"}},[e._v("游戏次数统计")]),a("el-tab-pane",{attrs:{index:"/userInfos",label:"玩家信息分析",name:"userInfos"}},[e._v("玩家信息分析")]),a("el-tab-pane",{attrs:{index:"/allKnowledges",label:"知识点管理",name:"allKnowledges"}},[e._v("知识点管理")])],1),e.isUserProgress?a("UserProgress"):e._e(),e.isGameNum?a("GameNum"):e._e(),e.isUserInfos?a("UserInfos"):e._e(),e.isAllKnowledges?a("AllKnowledges"):e._e()],1)},Gt=[],Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showDetailedUserInfos()}}},[e._v("玩家总人数:"+e._s(e.total))]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"500"}},[a("el-table-column",{attrs:{label:"排名",prop:"rank",width:"180"}}),a("el-table-column",{attrs:{label:"用户名",prop:"name",width:"180"}}),a("el-table-column",{attrs:{label:"用户ID",prop:"userId",width:"180"}}),a("el-table-column",{attrs:{label:"知识点解锁数",prop:"knowledgeNum",width:"180"}}),a("el-table-column",{attrs:{label:"游戏次数",prop:"gameNum",width:"180"}})],1)],1)},Kt=[],Ft={name:"UserProgress",data:function(){return{total:0,tableData:[],loading:!1}},mounted:function(){this.getUserProgresses(),this.loading=!1},methods:{getUserProgresses:function(){var e=this;this.loading=!0,H.getUserProgresses().then((function(t){var a=t.data.content;e.total=a.length;for(var s=0;s<e.total;s++)e.tableData.push({rank:s+1,name:a[s]["username"],userId:a[s]["id"],knowledgeNum:a[s]["knowledgeNum"],gameNum:a[s]["gameNum"]})})).catch((function(e){console.log(e.response)}))},showDetailedUserInfos:function(){wa.push("")}}},Vt=Ft,Jt=Object(u["a"])(Vt,Mt,Kt,!1,null,"52510939",null),Bt=Jt.exports,zt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},qt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"gameChart center",attrs:{id:"gameChart"}})])}],Ht={name:"GameNum",data:function(){return{time_range:[],time_range_num:[]}},mounted:function(){this.drawEcharts()},methods:{drawEcharts:function(){var e=this,t=this.$echarts.init(document.getElementById("gameChart"),"azul");H.getGameNums().then((function(a){200===a.status&&200===a.data.code&&(console.log("success"),e.time_range=a.data.content["timeRange"],e.time_range_num=a.data.content["timeRangeNum"],console.log(e.time_range),console.log(e.time_range_num),t.setOption({title:{text:"玩家游戏次数按天数分布"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{align:"right",x:"right",top:25,selectedMode:"single",data:["游戏次数"]},xAxis:{type:"category",boundaryGap:!1,data:e.time_range},yAxis:{type:"value"},series:[{name:"时间",data:e.time_range_num,type:"line",smooth:!0,areaStyle:{}}]},!0))})).catch((function(e){console.log(e.response)}))}}},Wt=Ht,Zt=(a("02a1"),Object(u["a"])(Wt,zt,qt,!1,null,"5ff3d73e",null)),Qt=Zt.exports,Xt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Yt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"myecharts center",attrs:{id:"myecharts"}}),a("div",{staticClass:"myecharts2 center",attrs:{id:"myecharts2"}})])}],ea=(a("07ac"),{name:"UserInfos",data:function(){return{age_range:[],age_range_num:[],gender_range:[],gender_range_num:[]}},mounted:function(){this.drawEcharts()},methods:{drawEcharts:function(){var e=this,t=this.$echarts.init(document.getElementById("myecharts"),"azul"),a=this.$echarts.init(document.getElementById("myecharts2"),"azul");H.getUserInfos().then((function(s){200===s.status&&200===s.data.code&&(console.log("success"),e.age_range=Object.values(s.data.content["ageRange"]),e.age_range_num=s.data.content["ageRangeNum"],e.gender_range=s.data.content["genderRange"],e.gender_range_num=s.data.content["genderRangeNum"],t.setOption({title:{text:"玩家年龄分布"},tooltip:{},legend:{data:["年龄"]},xAxis:{data:e.age_range},yAxis:{},series:[{name:"年龄",type:"bar",data:e.age_range_num}]},!0),a.setOption({title:{text:"玩家性别分布"},tooltip:{},legend:{data:["性别"]},xAxis:{data:["男","女"]},yAxis:{},series:[{name:"性别",type:"bar",data:e.gender_range_num}]},!0))})).catch((function(e){console.log(e.response)}))}}}),ta=ea,aa=(a("87c5"),Object(u["a"])(ta,Xt,Yt,!1,null,"123c1c0e",null)),sa=aa.exports,oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"知识点类别"}},[a("span",[e._v(e._s(t.row.type))])]),a("el-form-item",{attrs:{label:"知识点 ID"}},[a("span",[e._v(e._s(t.row.id))])]),a("el-form-item",{attrs:{label:"详情"}},[a("span",[e._v(e._s(t.row.desc))])])],1)]}}])}),a("el-table-column",{attrs:{label:"知识点 ID",prop:"id"}}),a("el-table-column",{attrs:{label:"知识点类别",prop:"type"}}),a("el-table-column",{attrs:{label:"详情",prop:"desc"}})],1)},na=[],ra={name:"AllKnowledges",data:function(){return{knowledgeList:[],tableData:[{id:"12987122",type:"选择题",desc:"1+1=2"}]}},mounted:function(){this.getAllKnowledges()},methods:{getAllKnowledges:function(){var e=this;H.getAllKnowledges().then((function(t){for(var a=t.data.content,s=a.length,o=0;o<s;o++)e.tableData.push({id:o,type:"高中生物",desc:a[o]["content"]})})).catch((function(e){console.log(e.response)}))}}},la=ra,ia=Object(u["a"])(la,oa,na,!1,null,"3d80a222",null),ca=ia.exports,ua={name:"AdminContainer",components:{UserProgress:Bt,GameNum:Qt,UserInfos:sa,AllKnowledges:ca},data:function(){return{activeName:"userProgress",isUserProgress:!0,isGameNum:!1,isUserInfos:!1,isAllKnowledges:!1}},methods:{handleClick:function(e){switch(console.log(e.index),e.index){case"0":this.isUserProgress=!0,this.isGameNum=!1,this.isUserInfos=!1,this.isAllKnowledges=!1;break;case"1":this.isUserProgress=!1,this.isGameNum=!0,this.isUserInfos=!1,this.isAllKnowledges=!1;break;case"2":this.isUserProgress=!1,this.isGameNum=!1,this.isUserInfos=!0,this.isAllKnowledges=!1;break;case"3":this.isUserProgress=!1,this.isGameNum=!1,this.isUserInfos=!1,this.isAllKnowledges=!0;break}console.log(this.isUserProgress),console.log(this.isGameNum),console.log(this.isUserInfos),console.log(this.isAllKnowledges)}}},da=ua,ma=Object(u["a"])(da,Lt,Gt,!1,null,"d53af0b4",null),pa=ma.exports,fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticClass:"organized",on:{click:function(t){return e.return2Hall()}}},[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v("返回")])],1),a("span",{staticClass:"organized"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("创建房间")])],1),a("el-dialog",{attrs:{title:"房间信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"房间名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.roomName,callback:function(t){e.$set(e.form,"roomName",t)},expression:"form.roomName"}})],1),a("el-form-item",{attrs:{label:"房间人数","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择房间人数"},model:{value:e.form.userNum,callback:function(t){e.$set(e.form,"userNum",t)},expression:"form.userNum"}},e._l([2,3,4,5],(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createRoomAndStartGame()}}},[e._v("确 定")])],1)],1),a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.startEnterRandomRoom()}}},[e._v("随机加入房间")])],1),a("el-dialog",{attrs:{title:"房间信息",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{property:"roomID",label:"房间号",width:"150"}}),a("el-table-column",{attrs:{property:"roomName",label:"房间名称",width:"200"}}),a("el-table-column",{attrs:{property:"players_str",label:"玩家列表"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.enterRandomRoom()}}},[e._v("加 入")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),a("el-table-column",{attrs:{label:"房间名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("房间ID: "+e._s(t.row.roomID))]),a("p",[e._v("玩家列表: "+e._s(t.row.players_str))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),a("el-table-column",{attrs:{label:"房间人数",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-user"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.playerNum)+" / "+e._s(t.row.maxPlayNum))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:t.row.disabled},on:{click:function(a){return e.enterCertainRoom(t.row.roomID)}}},[e._v("加入房间")])]}}])}),a("el-table-column",{attrs:{label:"游戏状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-user-solid"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.status))])]}}])})],1)],1)},ga=[],ha={name:"Room",data:function(){return{gameLink:"",tableData:[],trueRooms:[],gridData:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{roomName:"",userNum:""},formLabelWidth:"120px",room_socket:null}},created:function(){this.gameLink=H.gameURL,console.log("start mounting...");var e=new $t.a("http://localhost:8080/ws");this.room_socket=At.a.over(e),console.log("finish")},mounted:function(){this.getRooms()},methods:{getRooms:function(){var e=this;console.log("get rooms..."),H.getRooms().then((function(t){if(200===t.status&&200===t.data.code)for(var a=t.data.content,s=a.length,o=0;o<s;o++){var n=a[o]["usernames"],r=n.length>0?n.join():"暂无玩家";e.tableData.push({date:a[o]["date"],roomID:a[o]["id"],players_str:r,playerNum:a[o]["playerNum"],maxPlayNum:a[o]["maxPlayNum"],name:a[o]["name"]?a[o]["name"]:"未命名房间",status:a[o]["status"],disabled:"waiting"!==a[o]["status"]}),"waiting"===a[o]["status"]&&e.trueRooms.push({date:a[o]["date"],roomID:a[o]["id"],players_str:r,playerNum:a[o]["playerNum"],maxPlayNum:a[o]["maxPlayNum"],name:a[o]["name"]?a[o]["name"]:"未命名房间",status:a[o]["status"],disabled:"waiting"!==a[o]["status"]})}}))},enterCertainRoom:function(e){console.log("try to enter the room "+e),this.$message("进入房间"+e+"..."),this.startGame(e)},createRoomAndStartGame:function(){var e=this;this.dialogFormVisible=!1,H.createRoom({name:this.form.roomName,playerNum:this.form.userNum}).then((function(t){if(200===t.status){if(200===t.data.code){e.$message.success("创建成功,进入游戏...");var a=t.data.content,s=a["id"];y.a.set("roomID",s),e.startGame(s)}}else console.log("error")})).catch((function(e){console.log(e.response)}))},startGame:function(e){y.a.set("roomID",e),this.$router.push({path:"/chatRoom"})},return2Hall:function(){this.$router.push({path:"/hall"})},startEnterRandomRoom:function(){if(0===this.trueRooms.length)this.$message("暂未有开放房间，请重新创建");else{var e=Math.round(Math.random()*this.trueRooms.length);e>0&&(e-=1),this.gridData=[],this.gridData.push({roomID:this.trueRooms[e]["roomID"],roomName:this.trueRooms[e]["name"],player_str:this.trueRooms[e]["players_str"]}),this.dialogTableVisible=!0}},enterRandomRoom:function(){this.dialogTableVisible=!1,this.startGame(this.gridData["roomID"])}}},ba=ha,va=(a("2b69"),Object(u["a"])(ba,fa,ga,!1,null,"58d288d0",null)),_a=va.exports;s["default"].use(p["a"]);var wa=new p["a"]({mode:"hash",linkActiveClass:"open active",scrollBehavior:function(){return{y:0}},routes:[{path:"/",redirect:"/hall",name:"Hall",component:ke,children:[{path:"models",name:"models",component:gt},{path:"information",name:"Information",component:it,meta:{requiresAuth:!0}},{path:"records",name:"Records",component:Je},{path:"knowledgeList",name:"knowledgeList",component:yt},{path:"hall",name:"Hall",component:Nt},{path:"chatRoom",name:"Chatting",component:Tt},{path:"admin",name:"Admin",component:pa},{path:"userProgress",name:"UserProgress",component:Bt},{path:"userInfos",name:"UserInfos",component:sa},{path:"gameNum",name:"GameNum",component:Qt},{path:"room",name:"Room",component:_a}]},{path:"/pages",redirect:"/pages/404",name:"Pages",component:{render:function(e){return e("router-view")}},children:[{path:"404",name:"Page404",component:Re},{path:"500",name:"Page500",component:Le},{path:"login",name:"Login",component:Ze},{path:"register",name:"Register",component:at}]}]}),ya=a("313e"),xa=a.n(ya);a("92b4");s["default"].config.productionTip=!1,s["default"].use(n.a);var Ca=["/pages/Login","/pages/Register","/pages/Page404","/pages/Page500"];wa.beforeEach((function(e,t,a){console.log(Ca),console.log("token is "+y.a.get("token")),console.log("user id is "+ae.getters.user_id),-1!==ae.getters.user_id?(-1!==Ca.indexOf(e.path)&&a("hall"),a()):-1!==Ca.indexOf(e.path)?a():ae.dispatch("setUserInfo").then((function(){console.log("enter..."),console.log(ae.getters.user_id),-1!==ae.getters.user_id?(console.log("in"),a()):a("/pages/Login")})).catch((function(){a("/pages/Login")}))})),C.a.interceptors.request.use((function(e){return console.log("axios interceptor works..."),y.a.get("token")&&(e.headers.jwt_token=y.a.get("token"),console.log("config header is "+e.headers)),e}),(function(e){return Promise.reject(e)})),C.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response)switch(console.log("axios:"+e.response.status),e.response.status){case 403:wa.replace({path:"/pages/Login",query:{redirect:wa.currentRoute.fullPath}});break;case 400:wa.replace({path:"/pages/Login",query:{redirect:wa.currentRoute.fullPath}});break}return Promise.reject(e.response.data)})),s["default"].prototype.$http=C.a,s["default"].prototype.$echarts=xa.a,new s["default"]({render:function(e){return e(m)},router:wa,store:ae}).$mount("#app")},"65cb":function(e,t,a){"use strict";var s=a("b7df"),o=a.n(s);o.a},"6d02":function(e,t,a){},"7cc9":function(e,t,a){"use strict";var s=a("15f5"),o=a.n(s);o.a},8472:function(e,t,a){},"87c5":function(e,t,a){"use strict";var s=a("2f9d"),o=a.n(s);o.a},"93d5":function(e,t,a){"use strict";var s=a("1281"),o=a.n(s);o.a},9564:function(e,t,a){e.exports=a.p+"img/back.52d31fdc.jpg"},a32b:function(e,t,a){},a376:function(e,t,a){},a726:function(e,t,a){"use strict";var s=a("8472"),o=a.n(s);o.a},b56d:function(e,t,a){e.exports=a.p+"img/xxb1.41f457d3.jpeg"},b7df:function(e,t,a){},c77c:function(e,t,a){},c7e7:function(e,t,a){},c839:function(e,t,a){"use strict";var s=a("c77c"),o=a.n(s);o.a},d073:function(e,t,a){},d347:function(e,t){},d3dc:function(e,t,a){"use strict";var s=a("a376"),o=a.n(s);o.a},ece8:function(e,t,a){"use strict";var s=a("f39d"),o=a.n(s);o.a},f0ed:function(e,t,a){},f39d:function(e,t,a){},f947:function(e,t,a){},fc16:function(e,t,a){e.exports=a.p+"img/bxb.b757a481.jpeg"}});
//# sourceMappingURL=app.fc36549f.js.map